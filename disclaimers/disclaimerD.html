<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatbot disclaimer - Sequential version</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Formal neutral colour scheme */
    :root {
      --bg-white: #ffffff;
      --bg-light: #fafafa;
      --text-primary: #1a1a1a;
      --text-secondary: #4a4a4a;
      --text-tertiary: #7a7a7a;
      --border: #d0d0d0;
      --border-dark: #999999;
      --progress-bg: #e5e5e5;
      --progress-fill: #666666;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background-color: var(--bg-light);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
      color: var(--text-primary);
    }

    .container {
      background-color: var(--bg-white);
      border: 1px solid var(--border);
      max-width: 720px;
      width: 100%;
      overflow: hidden;
    }

    /* Progress bar section */
    .progress-section {
      background-color: var(--bg-white);
      padding: 20px 40px;
      border-bottom: 1px solid var(--border);
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .progress-text {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .progress-count {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-secondary);
    }

    .progress-bar-container {
      width: 100%;
      height: 6px;
      background-color: var(--progress-bg);
      overflow: hidden;
    }

    .progress-bar-fill {
      height: 100%;
      background-color: var(--progress-fill);
      transition: width 0.3s ease;
    }

    /* Header section */
    .header-section {
      padding: 24px 40px 16px 40px;
      border-bottom: 1px solid var(--border);
      display: none;
    }

    .header-section.visible {
      display: block;
    }

    .header-section h1 {
      font-size: 16px;
      font-weight: 500;
      color: var(--text-tertiary);
      margin-bottom: 6px;
      line-height: 1.3;
    }

    .header-section p {
      font-size: 13px;
      line-height: 1.5;
      color: var(--text-tertiary);
    }

    /* Content section */
    .content-section {
      padding: 40px;
    }

    .step {
      display: none;
    }

    .step.active {
      display: block;
    }

    .step-header {
      margin-bottom: 24px;
    }

    .step-icon {
      width: 48px;
      height: 48px;
      background-color: var(--bg-light);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }

    .step-icon svg {
      width: 24px;
      height: 24px;
      stroke: var(--text-primary);
      fill: none;
      stroke-width: 2;
      stroke-linecap: square;
      stroke-linejoin: miter;
    }

    .step-title {
      font-size: 22px;
      font-weight: 600;
      color: var(--text-primary);
      line-height: 1.3;
      margin-bottom: 16px;
    }

    /* Strong emphasis for Step 1 title */
    .step[data-step="1"] .step-title {
      font-size: 32px;
      font-weight: 700;
      color: var(--text-primary);
      border-left: 4px solid var(--text-primary);
      padding-left: 20px;
      margin-left: -24px;
      margin-bottom: 20px;
    }

    .step-description {
      font-size: 16px;
      line-height: 1.6;
      color: var(--text-secondary);
      margin-bottom: 20px;
    }

    .step-link {
      color: var(--text-primary);
      text-decoration: underline;
      font-size: 15px;
      font-weight: 400;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .step-link:hover {
      color: var(--text-secondary);
    }

    .step-link::after {
      content: '→';
      font-size: 16px;
    }

    /* Navigation section */
    .navigation-section {
      padding: 24px 40px;
      background-color: var(--bg-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      border-top: 1px solid var(--border);
    }

    .nav-button {
      padding: 12px 24px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      border: 1px solid var(--border-dark);
      min-width: 120px;
      background-color: var(--bg-white);
      color: var(--text-primary);
    }

    .btn-next {
      min-width: 240px;
    }

    .btn-back:hover:not(:disabled) {
      border-color: var(--text-primary);
      background-color: var(--bg-light);
    }

    .btn-back:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .btn-next,
    .btn-start {
      background-color: var(--text-primary);
      color: white;
      border: 1px solid var(--text-primary);
    }

    .btn-next:hover,
    .btn-start:hover {
      background-color: var(--text-secondary);
      border-color: var(--text-secondary);
    }

    .btn-start {
      min-width: 200px;
      margin-left: auto;
    }

    /* Success screen */
    .success-screen {
      display: none;
      text-align: center;
      padding: 60px 40px;
    }

    .success-screen.active {
      display: block;
    }

    .success-icon {
      width: 64px;
      height: 64px;
      background-color: var(--bg-light);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px auto;
    }

    .success-icon svg {
      width: 40px;
      height: 40px;
      stroke: var(--text-primary);
      fill: none;
      stroke-width: 2;
      stroke-linecap: square;
      stroke-linejoin: miter;
    }

    .success-screen h2 {
      font-size: 24px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px;
    }

    .success-screen p {
      font-size: 16px;
      color: var(--text-secondary);
      margin-bottom: 32px;
      line-height: 1.5;
    }

    .continue-button {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      background-color: var(--text-primary);
      color: white;
      border: 1px solid var(--text-primary);
      padding: 14px 32px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .continue-button svg {
      width: 20px;
      height: 20px;
    }

    .continue-button:hover {
      background-color: var(--text-secondary);
      border-color: var(--text-secondary);
    }

    @media (max-width: 640px) {
      .header-section {
        padding: 20px 24px 12px 24px;
      }

      .header-section h1 {
        font-size: 15px;
      }

      .header-section p {
        font-size: 12px;
      }

      .content-section {
        padding: 32px 24px;
      }

      .step[data-step="1"] .step-title {
        font-size: 28px;
        margin-left: -20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Progress bar section -->
    <div class="progress-section" id="progressSection">
      <div class="progress-header">
        <span class="progress-text">Important information</span>
        <span class="progress-count" id="progressCount">Step 1 of 4</span>
      </div>
      <div class="progress-bar-container">
        <div class="progress-bar-fill" id="progressBar" style="width: 25%;"></div>
      </div>
    </div>

    <!-- Header section -->
    <div class="header-section visible" id="headerSection">
      <h1>Before we begin...</h1>
      <p>A few things worth knowing about using this chatbot</p>
    </div>

    <!-- Content section -->
    <div class="content-section" id="contentSection">
      <!-- Step 1 -->
      <div class="step active" data-step="1">
        <div class="step-header">
          <div class="step-icon">
            <svg viewBox="0 0 24 24">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
          </div>
          <h2 class="step-title">This chatbot isn't a lawyer</h2>
        </div>
        <p class="step-description">
          Think of this tool as a helpful guide, not as legal advice. It can point you in the right direction and share useful information, but it can't replace advice from a qualified professional.
        </p>
        <a href="#" class="step-link">Learn more about what this chatbot can do</a>
      </div>

      <!-- Step 2 -->
      <div class="step" data-step="2">
        <div class="step-header">
          <div class="step-icon">
            <svg viewBox="0 0 24 24">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
          </div>
          <h2 class="step-title">Keep your personal details private</h2>
        </div>
        <p class="step-description">
          We automatically try to remove identifying information, but our system isn't perfect. Avoid sharing specific business names, addresses, or anything else that could identify you or your situation.
        </p>
        <a href="#" class="step-link">Read our privacy and data handling policy</a>
      </div>

      <!-- Step 3 -->
      <div class="step" data-step="3">
        <div class="step-header">
          <div class="step-icon">
            <svg viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
          </div>
          <h2 class="step-title">AI sometimes gets things wrong</h2>
        </div>
        <p class="step-description">
          This chatbot does its best, but it can make mistakes or misunderstand your question. Always double-check any links or information it provides before relying on it.
        </p>
        <a href="#" class="step-link">Find out how the chatbot works</a>
      </div>

      <!-- Step 4 -->
      <div class="step" data-step="4">
        <div class="step-header">
          <div class="step-icon">
            <svg viewBox="0 0 24 24">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
              <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
          </div>
          <h2 class="step-title">Your chat won't be saved</h2>
        </div>
        <p class="step-description">
          Once you close this page or leave the website, your conversation disappears. If you need a record of what was discussed, download or save it before you go.
        </p>
        <a href="#" class="step-link">Learn about our data retention practices</a>
      </div>
    </div>

    <!-- Navigation section -->
    <div class="navigation-section" id="navigationSection">
      <button class="nav-button btn-back" id="backButton" disabled>Back</button>
      <button class="nav-button btn-next" id="nextButton">Next</button>
      <button class="nav-button btn-start" id="startButton" style="display: none;">I understand, let's start</button>
    </div>

    <!-- Success screen -->
    <div class="success-screen" id="successScreen">
      <div class="success-icon">
        <svg viewBox="0 0 24 24">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
      </div>
      <h2>You're all set!</h2>
      <p>Thanks for taking the time to read through that. Let's get started with your question.</p>
      <button class="continue-button" id="continueButton">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
        Start chatting
      </button>
    </div>
  </div>

  <script>
    let currentStep = 1;
    const totalSteps = 4;

    const headerSection = document.getElementById('headerSection');
    const progressSection = document.getElementById('progressSection');
    const contentSection = document.getElementById('contentSection');
    const navigationSection = document.getElementById('navigationSection');
    const successScreen = document.getElementById('successScreen');
    
    const backButton = document.getElementById('backButton');
    const nextButton = document.getElementById('nextButton');
    const startButton = document.getElementById('startButton');
    
    const progressCount = document.getElementById('progressCount');
    const progressBar = document.getElementById('progressBar');
    const steps = document.querySelectorAll('.step');
    // --- Minimal per-step timing ---
let stepStartTime = Date.now();
let lastStep = null;
const stepTimes = {}; // e.g., {1: 1234, 2: 4567}

function _accumulateStepTime(prevStep) {
  if (!prevStep) return;
  const now = Date.now();
  const elapsed = now - stepStartTime;
  stepTimes[prevStep] = (stepTimes[prevStep] || 0) + elapsed;
  stepStartTime = now;
}
// --- End timing block ---


    // Step-specific button text
    const nextButtonText = {
      1: "Understood, this isn't legal advice",
      2: "I won't share identifying details",
      3: "I'll verify the information",
      4: "Got it, I'll save if needed"
    };

    // Initialise with first step visible
    updateStep();

    // Next button
    nextButton.addEventListener('click', () => {
      if (currentStep < totalSteps) {
        currentStep++;
        updateStep();
      }
    });

    // Back button
    backButton.addEventListener('click', () => {
      if (currentStep > 1) {
        currentStep--;
        updateStep();
      }
    });

    // Start button (final step)
    startButton.addEventListener('click', () => {
      // Hide main sections and show success screen
      progressSection.style.display = 'none';
      contentSection.style.display = 'none';
      navigationSection.style.display = 'none';
      successScreen.classList.add('active');
      
      // Keep a trace for debugging/analytics
      console.log('Disclaimer completed - proceeding to chatbot');
    });

    // Continue button — production redirect to GitHub Pages project: /TacoTruck/ChatBot.html
// Continue button — redirect to /TacoTruck/ChatBot.html
const continueButton = document.getElementById('continueButton');
continueButton.addEventListener('click', () => {
  // Finalise timing one last time if we didn't already
  if (typeof _accumulateStepTime === 'function' && typeof lastStep !== 'undefined' && lastStep !== null) {
    _accumulateStepTime(lastStep);
    lastStep = null;
  }

  // Safe sum with initial 0
  const totalMs = Object.values(stepTimes).reduce((a, b) => a + b, 0);
  const payload = { step_times: stepTimes, total_ms: totalMs };

  if (window.Logger && typeof Logger.log_event === 'function') {
    try { Logger.log_event('disclaimer_step_times', payload); } catch (e) { console.warn(e); }
  } else {
    console.log('disclaimer_step_times', payload);
  }

  // Tiny delay so the event persists before navigation
  setTimeout(() => {
    window.top.location.href = '/TacoTruck/ChatBot.html';
  }, 50);
});


    function updateStep() {
      // Timing: track time spent on each step
if (lastStep === null) {
  lastStep = currentStep;
  stepStartTime = Date.now();
} else if (lastStep !== currentStep) {
  _accumulateStepTime(lastStep);
  lastStep = currentStep;
}

      // Update step visibility
      steps.forEach(step => {
        step.classList.remove('active');
        if (parseInt(step.dataset.step) === currentStep) {
          step.classList.add('active');
        }
      });

      // Show/hide header section - only visible on first step
      if (currentStep === 1) {
        headerSection.classList.add('visible');
      } else {
        headerSection.classList.remove('visible');
      }

      // Update progress bar
      const progressPercent = (currentStep / totalSteps) * 100;
      progressBar.style.width = `${progressPercent}%`;
      progressCount.textContent = `Step ${currentStep} of ${totalSteps}`;

      // Update button states
      backButton.disabled = currentStep === 1;

      // Update Next button text with acknowledgement
      nextButton.textContent = nextButtonText[currentStep];

      // Show start button on last step, hide next button
      if (currentStep === totalSteps) {
        nextButton.style.display = 'none';
        startButton.style.display = 'block';
      } else {
        nextButton.style.display = 'block';
        startButton.style.display = 'none';
      }
    }

    // Prevent link default behaviour in demo
    document.querySelectorAll('.step-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        // In production, wire these to real documentation pages
      });
    });
  </script>
</body>
</html>
